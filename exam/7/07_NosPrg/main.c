//====================================================================
//文件名称：main.c（应用工程主函数）
//框架提供：SD-Arm（sumcu.suda.edu.cn）
//版本更新：2017.08, 2020.06
//功能描述：见本工程的<01_Doc>文件夹下Readme.txt文件
//====================================================================

#define GLOBLE_VAR
#include "includes.h"      //包含总头文件

//----------------------------------------------------------------------
//声明使用到的内部函数
//main.c使用的内部函数声明处

//----------------------------------------------------------------------
//主函数，一般情况下可以认为程序从此开始运行（实际上有启动过程见书稿）
int main(void)
{
    //（1）======启动部分（开头）==========================================
    //（1.1）声明main函数使用的局部变量
    uint8_t  mFlag;           //主循环使用的临时变量
    uint8_t  mSec;	         //记当前秒的值
    
    //（1.2）【不变】关总中断
    DISABLE_INTERRUPTS;
    wdog_stop();
    
    //（1.3）给主函数使用的局部变量赋初值

    mFlag='A';              //主循环使用的临时变量：蓝灯状态标志
    //（1.4）给全局变量赋初值
   	//"时分秒"缓存初始化(00:00:00)
   	gTime[0] = 0;       //时
   	gTime[1] = 0;	  	//分
   	gTime[2] = 0;	  	//秒
   	mSec = gTime[2];	//记住当前秒的值
    //（1.5）用户外设模块初始化
    gpio_init(LIGHT_BLUE,GPIO_OUTPUT,LIGHT_OFF);    //初始化蓝灯
    uart_init(UART_User,9600);              

    flash_init();
    systick_init(10);      
    uart_enable_re_int(UART_User);

    ENABLE_INTERRUPTS;
    
    printf("------------------------------------------------------\n"); 
    printf("金葫芦提示：FLASH实例 \n");
    printf("  ① 蓝灯闪烁,配合Flash-Csharp程序进行读写\n");
	printf("  ② 擦除,读取,写入格式如下:\r\n");
	printf("  ③ 擦    除 E：输入正确的扇区号，点击Flash写测试按钮\r\n");
	printf("  ④ 读    取 R（逻辑地址）：输入正确的Flash信息，点击读测试（逻辑地址按钮）\r\n");
	printf("  ⑤ 读    取 A（物理地址）：输入正确的Flash信息，点击读测试（物理地址按钮）\r\n");
	printf("  ⑥ 写    入 W：输入正确的Flash信息，点击Flash写测试按钮\r\n");
    printf("  ⑦ 请退出本界面，运行Flash-Csharp程序   \n");
    printf("------------------------------------------------------\n"); 

    

    for(;;)     //for(;;)（开头）
    {
        
    }    
}